{% if players or available_players %}
<div class="d-flex flex-column overflow-auto" style="max-height: 60vh;">
    <!-- Current Players Section -->
    {% if players %}
    <div class="mb-3">
        <h6 class="text-muted px-3 pt-2 pb-1 mb-0">Current Players</h6>
        <ul class="list-group list-group-flush">
            {% for player in players %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ player.nick }}</span>
                <button class="btn btn-sm btn-outline-danger"
                    hx-delete="/game/{{ game.id }}/remove_player/{{ player.id }}" hx-swap="none" hx-on:htmx:confirm="event.preventDefault();
                            Swal.fire({
                                title: 'Are you sure?',
                                text: 'You are about to remove {{ player.nick }} from the game. All their buy-ins and add-ons for this game will be deleted!',
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonColor: '#d33',
                                cancelButtonColor: '#3085d6',
                                confirmButtonText: 'Yes, remove them!',
                                cancelButtonText: 'Cancel'
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    event.detail.issueRequest();
                                }
                            })">
                    <i class="bi bi-person-dash me-1"></i> Remove
                </button>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% else %}
    <div class="mb-3">
        <p class="text-center text-muted m-3">Only the owner is in the game.</p>
    </div>
    {% endif %}

    <!-- Available Players Section -->
    {% if available_players %}
    <div>
        <h6 class="text-muted px-3 pt-2 pb-1 mb-0 border-top">Available to Add</h6>
        <ul class="list-group list-group-flush">
            {% for player in available_players %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ player.nick }}</span>
                <button class="btn btn-sm btn-success" hx-post="/game/{{ game.id }}/add_player/{{ player.id }}"
                    hx-swap="none">
                    <i class="bi bi-person-plus me-1"></i> Add
                </button>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% else %}
    <div class="border-top">
        <p class="text-center text-muted m-3">No more players available to add.</p>
    </div>
    {% endif %}
</div>
{% else %}
<p class="text-center text-muted m-3">No players found.</p>
{% endif %}