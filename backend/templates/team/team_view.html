{% extends "shared/base.html" %}
{% block title %}
<title>Group {{ team.name }}</title>
{% endblock %}
{% block page_heading %}{{ team.name }} <span class="text-muted">#{{ team.search_code }}</span>{% endblock %}

{% block content %}

{% if current_user.id == team.owner.id and join_requests %}
{%with join_requests=join_requests %}
{% include "team/component_join_request.html" %}
{% endwith %}
{% endif %}
<div class="d-flex flex-column" style="height: calc(100vh - 240px);">
    <div class="table-responsive flex-grow-1">
        <table class="table table-hover table-hover-custom align-middle mb-0">
            <thead class="sticky-top bg-white border-bottom">
                <tr class="text-uppercase text-secondary" style="font-size: 0.75rem; letter-spacing: 0.05em;">
                    <th scope="col" class="py-2 ps-3 fw-normal border-0">Player</th>
                    <th scope="col" class="py-2 text-center fw-normal border-0">Games</th>
                    <th scope="col" class="py-2 text-end pe-3 fw-normal border-0">Balance</th>
                </tr>
            </thead>
            <tbody>
                {% for info in players_info %}
                <tr class="position-relative">
                    <td class="ps-3 border-bottom-0 py-2">
                        <a href="/team/{{ team.id }}/player/{{ info.player.id }}" class="text-decoration-none text-dark fw-semibold stretched-link">
                            {{ info.player.nick }}
                        </a>
                        {% if info.player.id == team.owner_id %}
                        <span class="badge rounded-pill bg-warning text-dark ms-1 border border-warning bg-opacity-25" style="font-size: 0.6em; vertical-align: text-top;">OWNER</span>
                        {% endif %}
                    </td>
                    <td class="text-center border-bottom-0 py-2 text-secondary">{{ info.games_count }}</td>
                    <td class="text-end pe-3 border-bottom-0 py-2">
                        <span class="fw-medium {% if info.total_balance < 0 %}text-danger{% else %}text-success{% endif %}">
                            {% if info.total_balance % 1 %}
                            {{ "%.2f"|format(info.total_balance) }}
                            {% else %}
                            {{ info.total_balance|int }}
                            {% endif %}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-3 flex-shrink-0 bg-white pt-2">
        <a href="/?tab=groups" class="btn btn-outline-secondary">Back</a>
    </div>
</div>
{% endblock %}