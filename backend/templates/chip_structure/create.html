{% extends "shared/base.html" %}

{% block title %}
    <title>Create Chip Structure</title>
{% endblock %}

{% block content %}
    <div class="container mt-4">
        <h2 class="mb-4">Create New Chip Structure</h2>
        <div class="text-danger font-weight-bold"></div>
            {% for error in errors %}
            <li>{{ error }}</li>
            {% endfor %}
        </div>

        <form id="chipStructureForm" method="POST">
            <div id="chipRows">
            <div class="row mb-3 align-items-center chip-row">
                <div class="col-md-10">
                {% include "chip/create.html" %}
                </div>
                <div class="col-md-2">
                <label class="form-label">&nbsp;</label>
                <button type="button" class="btn btn-danger btn-sm d-block" onclick="deleteRow(this)">✕</button>
                </div>
            </div>
            </div>
            <div class="mb-3">
            <button type="button" class="btn btn-success" onclick="addRow()">
                <i class="bi bi-plus-lg"></i> Add Chip
            </button>
            </div>
            <button type="submit" class="btn btn-primary">Save Chip Structure</button>
        </form>
        </div>

        <script>
        function addRow() {
            const container = document.getElementById('chipRows');
            const newRow = document.createElement('div');
            newRow.className = 'row mb-3 align-items-center chip-row';
            newRow.innerHTML = `
            <div class="col-md-10">
                {% include "chip/create.html" %}
            </div>
            <div class="col-md-2">
                <label class="form-label">&nbsp;</label>
                <button type="button" class="btn btn-danger btn-sm d-block" onclick="deleteRow(this)">✕</button>
            </div>
            `;
            container.appendChild(newRow);
        }

        function deleteRow(element) {
            const rows = document.getElementsByClassName('chip-row');
            if (rows.length > 1) {
            element.closest('.chip-row').remove();
            }
        }
        </script>
    {% endblock %}

        